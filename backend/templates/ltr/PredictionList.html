{% extends 'components/base.html' %}
{% load static%}

		{% block styles %}
		<!-- Data table css -->
		<link href="{% static ''%}assets/plugins/datatable/css/dataTables.bootstrap5.css" rel="stylesheet" />
		<link href="{% static ''%}assets/plugins/datatable/css/buttons.bootstrap5.min.css"  rel="stylesheet">
		<link href="{% static ''%}assets/plugins/datatable/responsive.bootstrap5.css" rel="stylesheet" />
		<link href="{% static ''%}assets/plugins/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet" />
		<!-- Slect2 css -->
		<link href="{% static ''%}assets/plugins/select2/select2.min.css" rel="stylesheet" />
		{% endblock styles %}

			{% block body %}
			
			<!-- Row -->
			<div class="row">
				<div class="col-12">
					

					<!--div-->
					<div class="card">
						<div class="card-header">
									
								<div class="col-md-4 ps-0">
									<h3 class="card-title">Prediction List</h3>
								</div>

								<div class="col-md-7">
									<form id="Prediction" class="text-center border border-light" method="POST" action="/admin/db_table/PredictionList">	
										<div class="row">
											<div class="col-md-6 col-sm-6 mb-0 ">
													<select id="League" name="League" class="form-control SlectBox">
														<!--placeholder-->
														<option value="">Sort by league</option>
														{% for lg in league %}
					                                        <option {% if League == lg.league_id %} selected ="selected" {% endif %} value="{{lg.league_id}}"> {{lg.name}}</option>
					                                    {% endfor %}
														
													</select>
											</div>
											<div class="col-md-6 col-sm-6 mb-0">
												{% csrf_token %}
												<input type="hidden" name="start_limit" id="start_limit" value="{{start_limit}}">
												<input type="hidden" name="end_limit" id="end_limit" value="{{end_limit}}">

												
												<input type="hidden" name="todate" id="todate" value="{{todate}}">
												<input type="hidden" name="fromdate" id="fromdate" value="{{fromdate}}">
												<a class="btn btn-white date-range-btn btn-block" href="javascript:void(0)" id="daterange-btn"><span>Select Date Range<i class="fa fa-caret-down"></i></span>
												</a>
											
											</div>
										</div>
									</form>
								</div>
								<div class="col-md-1">
									<a href="#" class="btn btn-info" id="export-excel">
									<i class="fa fa-file-excel-o fa-lg" data-bs-toggle="tooltip" title="" data-bs-original-title="Download Excel" aria-label="fa fa-file-excel-o"></i>
								</a>
								</div>
							
										
						</div>
						
						<div class="card-body">
							<div class="table-responsive">
								<table class="table transaction-table table-striped" id="example2">
									<thead class="thead-light">
										<tr>
											<th class="wd-15p border-bottom-0">Home Team</th>
											<th class="wd-20p border-bottom-0">Away Team</th>
											<th class="wd-10p border-bottom-0">Predictions</th>
											<th class="wd-25p border-bottom-0">Home Score</th>
											<th class="wd-25p border-bottom-0">Away score</th>
											<th class="wd-25p border-bottom-0">Probability</th>
											<th class="wd-25p border-bottom-0">Date</th>
											<th class="wd-25p border-bottom-0">More Info</th>

										</tr>
									</thead>
									<tbody>
										{% for sub in prediction%}
											<tr>
												<td>{{sub.Home}}</td>
												<td>{{sub.Away}}</td>
												<td>{{sub.Predictions}}</td>
												<td>{{sub.Home_score}}</td>
												<td>{{sub.Away_score}}</td>
												<td>{{sub.Probability}}</td>
												<td>{{sub.formated_date}}</td>
												
												<td class="text-center">
													<a href="/admin/db_table/PredictionDetail/{{sub.match_id}}"><i class="ion-navicon-round"  aria-label="ion-navicon-round"></i></a>
												</td>
											</tr>
										{% endfor %}
									</tbody>
								</table>
							</div>
						</div>
					</div>
					<!--/div-->
					
				</div>
			</div>

    
			<div style="display: none" >
				<table id="predictionlist">
					<thead >
						<tr>
							<th>Match Name</th>
							<th>Home Team</th>
							<th>Away Team</th>
							<th>Predictions</th>
							<th>Home Score</th>
							<th>Away score</th>
							<th>Probability</th>
							<th>Under 2.5 Goals</th>
							<th>Under 2.5 Odds</th>
							<th>Over 2.5 Goals</th>
							<th>Over 2.5 Odds</th>
							<th>Home Handicap</th>
							<th>Away Handicap</th>
							
							<th>Home Win%</th>
							<th>Draw%</th>
							<th>Away Win%</th>
							
							<th>Home Decimal Odds</th>
							<th>Draw Decimal Odds</th>
							<th>Away Decimal Odds</th>
							
							<th>Home Fractional Odds</th>
							<th>Draw Fractional Odds</th>
							<th>Away Fractional Odds</th>
							
							<th>Home American Odds</th>
							<th>Draw American Odds</th>
							<th>Away American Odds</th>
							
							<th>HST</th>
							<th>AST</th>
							<th>HTEloRatings</th>
							<th>ATEloRatings</th>
							<th>Date</th>
						</tr>
					</thead>
					<tbody>
						{% for sub in prediction%}
							<tr>
								<td>{{sub.match_name}}</td>
								<td>{{sub.Home}}</td>
								<td>{{sub.Away}}</td>
								<td>{{sub.Predictions}}</td>
								<td>{{sub.Home_score}}</td>
								<td>{{sub.Away_score}}</td>
								<td>{{sub.Probability}}</td>
								<td>{{sub.under_2_5_goals_probability}}</td>
								<td>{{sub.under_2_5_odds}}</td>
								<td>{{sub.over_2_5_goals_probability}}</td>
								<td>{{sub.over_2_5_odds}}</td>
								<td>{{sub.home_handicap}}</td>
								<td>{{sub.away_handicap}}</td>
								<td>{{sub.probability_percent_away_win}}</td>
								<td>{{sub.probability_percent_draw}}</td>
								<td>{{sub.probability_percent_home_win}}</td>
								
								<td>{{sub.predicted_decimal_odds_away_odds}}</td>
								<td>{{sub.predicted_decimal_odds_draw_odds}}</td>
								<td>{{sub.predicted_decimal_odds_home_odds}}</td>
								
								<td>{{sub.predicted_fractional_odds_away_odds}}</td>
								<td>{{sub.predicted_fractional_odds_draw_odds}}</td>
								<td>{{sub.predicted_fractional_odds_home_odds}}</td>
								
								<td>{{sub.predicted_american_odds_away_odds}}</td>
								<td>{{sub.predicted_american_odds_draw_odds}}</td>
								<td>{{sub.predicted_american_odds_home_odds}}</td>
								
								<td>{{sub.HST}}</td>
								<td>{{sub.AST}}</td>
								<td>{{sub.HTEloRatings}}</td>
								<td>{{sub.ATEloRatings}}</td>
								
								<td>{{sub.formated_date}}</td>
								
								
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
			<!-- /Row -->
			{% endblock body %}
					
		{% block scripts %}
		<!-- Data tables -->
		<script src="{% static ''%}assets/plugins/datatable/js/jquery.dataTables.min.js"></script>
		<script src="{% static ''%}assets/plugins/datatable/js/dataTables.bootstrap5.js"></script>
		<script src="{% static ''%}assets/plugins/datatable/js/dataTables.buttons.min.js"></script>
		<script src="{% static ''%}assets/plugins/datatable/js/buttons.bootstrap5.min.js"></script>
		<script src="{% static ''%}assets/plugins/datatable/js/jszip.min.js"></script>
		<script src="{% static ''%}assets/plugins/datatable/pdfmake/pdfmake.min.js"></script>
		<script src="{% static ''%}assets/plugins/datatable/pdfmake/vfs_fonts.js"></script>
		<script src="{% static ''%}assets/plugins/datatable/js/buttons.html5.min.js"></script>
		<script src="{% static ''%}assets/plugins/datatable/js/buttons.print.min.js"></script>
		<script src="{% static ''%}assets/plugins/datatable/js/buttons.colVis.min.js"></script>
		<script src="{% static ''%}assets/plugins/datatable/dataTables.responsive.min.js"></script>
		<script src="{% static ''%}assets/plugins/datatable/responsive.bootstrap5.min.js"></script>
		<script src="{% static ''%}assets/js/datatables.js"></script>

		<!-- Select2 js -->
		<script src="{% static ''%}assets/plugins/select2/select2.full.min.js"></script>
		<script src="{% static ''%}assets/plugins/moment/moment.js"></script>

		<!-- Daterangepicker js-->
		<script src="{% static ''%}assets/plugins/bootstrap-daterangepicker/daterangepicker.js"></script>
		<script>
			//Date range as a button
			$('#daterange-btn').daterangepicker({
				ranges: {
					'Today': [moment(), moment()],
					'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
					'Last 7 Days': [moment().subtract(6, 'days'), moment()],
					'Last 30 Days': [moment().subtract(29, 'days'), moment()],
					'This Month': [moment().startOf('month'), moment().endOf('month')],
					'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
				},
				startDate: moment().subtract(29, 'days'),
				endDate: moment()
			}, function(start, end) {
				console.log(start.format('YYYY-MM-DD'))
				console.log(end.format('YYYY-MM-DD'))
				$('#todate').val(start.format('YYYY-MM-DD'))
				$('#fromdate').val(end.format('YYYY-MM-DD'))
				$('#daterange-btn span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'))
				$("#Prediction").submit();
			})
			$("#export-excel").click(function() {
				$("#predictionlist").table2excel({
					filename: "prediction.xls"
				});
			});
			$("#League").change(function() {
				
				$("#Prediction").submit();
			});
			
			

			
	    
		</script>
		 <script src="{% static ''%}assets/table2excel.js" type="text/javascript"></script>
    <script type="text/javascript">
        function Export() {
            $("#tblCustomers").table2excel({
                filename: "Table.xls"
            });
        }
    </script>
		{% endblock scripts %}